---
title: Never log in to your servers again with Ansible
theme: metropolis
output:
  beamer_presentation:
    theme: metropolis
---
`r source("config.R")`

# Where does the name "ansible" come from?

```{r enders-game-cover, out.height="2in", fig.cap="A scifi novel featuring an ansible as a communication device."}
draw_image("img/enders-game-cover.jpg")
```

# Use Ansible to talk to your fleet

```{r ansible-orchestra, engine="dot", out.width="3in"}
digraph {
  fontname=Helvetica;
  node[fontname=Helvetica shape=circle style=filled];
  control -> {web1, web2, web3, db1, db2};
  control[fillcolor="#fc8d62"];
  web1, web2, web3[fillcolor="#66c2a5"];
  db1, db2[fillcolor="#8da0cb"];
}
```

```bash
control/$ ansible web -a "df"
control/$ ansible db  -a "df"
control/$ ansible all -a "df"
```

# An example inventory file listing all servers in fleet

```
# contents of /etc/ansible/hosts

[web]
web1.example.com
web2.example.com
web3.example.com

[db]
db1.example.com
db2.example.com
```

# Control a single server with Ansible

```{r ansible-simple, engine="dot"}
digraph {
  fontname=Helvetica;
  node[fontname=Helvetica shape=circle style=filled];
  laptop -> server;
  laptop[fillcolor="#fc8d62"];
  server[fillcolor="#66c2a5"];
}
```

# Share control of servers

```{r ansible-tower, engine="dot"}
digraph {
  fontname=Helvetica;
  node[fontname=Helvetica shape=circle style=filled];
  {player1, player2, player3} -> control -> {web1, web2, web3, db1, db2};
  player1, player2, player3[fillcolor="#e78ac3"];
  control[fillcolor="#fc8d62"];
  web1, web2, web3[fillcolor="#66c2a5"];
  db1, db2[fillcolor="#8da0cb"];
}
```

# Ansible for DevOps

```{r ansible-for-devops, out.height="2.5in", fig.cap='"Ansible for DevOps" by Jeff Geerling aka geerlingguy.'}
grid.arrange(
  read_image("img/ansible-for-devops-cover.jpg"),
  read_image("img/jeff-geerling.jpg"),
  nrow = 1,
  widths = c(0.6, 0.4)
)
```

# Command line tools

ansible
:   Run an ad-hoc command.

        ansible web -a "df"

playbook
:   Run a playbook.

        ansible-playbook setup.yml

vault
:   Simple encryption.

        ansible-vault encrypt vars/secrets.yml

galaxy
:   Use and develop 3rd party modules.

        ansible-galaxy install geerlingguy.mysql

# Vocabulary

playbook
:   YAML file containing one or more plays.

play
:   A play is a collection of tasks run on a host or hosts.

task
:   A task is a single unit of labor.

module
:   A module is command or command wrapper.

role
:   A bundle of tasks and variables to accomplish some modular goal.
